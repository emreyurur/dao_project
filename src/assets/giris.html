<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://unpkg.com/@solana/web3.js@1.33.0/lib/index.iife.js"></script>


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connect Wallet</title>
<style>
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  button {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
  }
</style>
</head>
<body>

<button id="connectButton">Connect Wallet</button>
<script src="https://unpkg.com/@solana/web3.js@1.33.0/lib/index.iife.js"></script>

<script src="https://solana.com/phantom/sdk.js"></script>
<script>
  const connectButton = document.getElementById('connectButton');
    var wallet
    
  // Function to connect to Phantom wallet
  async function connectWallet() {
    try {
       await window.solana.connect();
       const publicKey = window.solana.publicKey;
       console.log("Bağlanan cüzdanın public key'i:", publicKey.toBase58());
       fetchData()

      alert("Connected to Phantom wallet successfully!");
      // Redirect to another page after successful connection
     // window.location.href = "index.html";
    } catch (error) {
      console.error(error);
      alert("Failed to connect to Phantom wallet.");
    }
  }

  // Add click event listener to the button
  connectButton.addEventListener('click', connectWallet);
</script>

 <script>
    // Butona tıklanınca yapılacak işlemi tanımlayan fonksiyon
    function fetchData() {
        // API adresi
        let pk = window.solana.publicKey
        let denemeeem = pk
        const apiUrl = 'http://192.168.14.51:3000/checkOrganization?pubkey=' + denemeeem; // Örnek API adresi

        // API isteğini yapmak için fetch kullanılır
        fetch(apiUrl)
            .then(response => {
                // İstek başarılı mı kontrol edilir
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                // JSON verisini al ve işle
                console.log("neler oluyor")
                return response.json();
            })
            .then(data => {
                // API'den gelen veriyi kullanarak istenen işlemi yap
                console.log(data); // Örneğin, veriyi konsola yazdırabilirsiniz
                alert("API'den gelen veri: " + JSON.stringify(data)); // Veriyi bir bildirimle göster
            })
            .catch(error => {
                // Hata durumunda bildirim göster
                console.error('There has been a problem with your fetch operation:', error);
                alert('API sorgusu başarısız oldu. Lütfen tekrar deneyin.');
            });
    }

    // Butona tıklama olayı ve işlemi tetikleyen event listener
   
</script> 




</body>
</html>
